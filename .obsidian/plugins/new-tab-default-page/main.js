/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var r=Object.create;var n=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var g=s=>n(s,"__esModule",{value:!0});var m=(s,e)=>{g(s);for(var t in e)n(s,t,{get:e[t],enumerable:!0})},f=(s,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of u(e))!h.call(s,a)&&a!=="default"&&n(s,a,{get:()=>e[a],enumerable:!(t=c(e,a))||t.enumerable});return s},p=s=>f(g(n(s!=null?r(w(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);m(exports,{default:()=>l});var o=p(require("obsidian"));var i=p(require("obsidian")),d=class extends i.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new i.Setting(e).setName("Default New Tab Page").setDesc("Path of the note that will be opened in new tabs. (Images and PDFs also work.)").addText(t=>t.setPlaceholder("Meta/Homepage.md").setValue(this.plugin.settings.filePath).onChange(async a=>{this.plugin.settings.filePath=a,await this.plugin.saveSettings()})),new i.Setting(e).setName("Mode").setDesc("Select the mode in which the new note will be opened.").addDropdown(t=>{t.addOption("obsidian-default","Obsidian Default").addOption("live-preview","Live Preview").addOption("reading-mode","Reading Mode").addOption("source-mode","Source Mode").setValue(this.plugin.settings.mode).onChange(async a=>{this.plugin.settings.mode=a,await this.plugin.saveSettings()})})}};var b={filePath:"",mode:"obsidian-default"},l=class extends o.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new d(this.app,this)),app.workspace.onLayoutReady(()=>{let e=new WeakSet;app.workspace.iterateAllLeaves(t=>{e.add(t)}),this.registerEvent(app.workspace.on("layout-change",()=>{this.checkForNewTab(e)}))}),console.log("New Tab Default Page Plugin loaded.")}async loadSettings(){this.settings=Object.assign({},b,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async onunload(){console.log("New Tab Default Page Plugin unloaded.")}checkForNewTab(e){app.workspace.iterateAllLeaves(t=>{e.has(t)||(e.add(t),!(!t.view||t.view.getViewType()==="empty"))||this.openDefaultPage(t)})}async openDefaultPage(e){let t=this.settings.filePath;if(!t)return;let a=app.metadataCache.getFirstLinkpathDest(t,"/");if(!Boolean(a)){new o.Notice(`${t} is not a valid path to a note in your vault.`);return}await e.openFile(a),this.setViewMode(e,this.settings.mode)}setViewMode(e,t){console.log(t);let a=e.getViewState();switch(t){case"source-mode":a.state.mode="source",a.state.source=!0;break;case"live-preview":a.state.mode="source",a.state.source=!1;break;case"reading-mode":a.state.mode="preview";break}e.setViewState(a)}};
