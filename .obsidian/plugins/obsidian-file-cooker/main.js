/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/node-fetch/browser.js
var require_browser = __commonJS({
  "node_modules/node-fetch/browser.js"(exports, module2) {
    "use strict";
    var getGlobal = function() {
      if (typeof self !== "undefined") {
        return self;
      }
      if (typeof window !== "undefined") {
        return window;
      }
      if (typeof global !== "undefined") {
        return global;
      }
      throw new Error("unable to locate global object");
    };
    var global = getGlobal();
    module2.exports = exports = global.fetch;
    if (global.fetch) {
      exports.default = global.fetch.bind(global);
    }
    exports.Headers = global.Headers;
    exports.Request = global.Request;
    exports.Response = global.Response;
  }
});

// node_modules/obsidian-dataview/lib/index.js
var require_lib = __commonJS({
  "node_modules/obsidian-dataview/lib/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    require("obsidian");
    var getAPI3 = (app) => {
      var _a;
      if (app)
        return (_a = app.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
      else
        return window.DataviewAPI;
    };
    var isPluginEnabled = (app) => app.plugins.enabledPlugins.has("dataview");
    exports.getAPI = getAPI3;
    exports.isPluginEnabled = isPluginEnabled;
  }
});

// main.ts
__export(exports, {
  default: () => FileCookerPlugin
});
var import_obsidian22 = __toModule(require("obsidian"));

// src/action/delete-action.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/modal/delete-confirm-modal.ts
var import_obsidian = __toModule(require("obsidian"));
var DeleteConfirmModal = class extends import_obsidian.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Delete?" });
      if (this.resultArr.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.resultArr.forEach((info) => {
          contentEl.createEl("div", { text: info.path });
        });
        new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => {
          this.close();
          this.resultArr.forEach((info) => {
            this.app.vault.trash(info, true);
          });
          new import_obsidian.Notice("Delete Success!");
        })).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian.Notice("Delete Canceled!");
        }));
      }
    });
  }
};

// src/action/delete-action.ts
var DeleteAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      new DeleteConfirmModal(this.app, resultArr).open();
    } else {
      new import_obsidian2.Notice("No Files Found!");
    }
  }
};

// src/action/edit-front-matter-action.ts
var import_obsidian4 = __toModule(require("obsidian"));

// src/modal/edit-front-matter-modal.ts
var import_obsidian3 = __toModule(require("obsidian"));
var EditFrontMatterModal = class extends import_obsidian3.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
    let tmpFlag = localStorage.getItem("overrideFlag");
    if (tmpFlag && tmpFlag == "true") {
      this.overrideFlag = true;
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Edit Front Matter" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian3.Setting(contentEl).addText((txt) => txt.setPlaceholder("Front Matter Key").onChange((val) => {
        this.key = val;
      })).addText((txt) => txt.setPlaceholder("Front Matter Value").onChange((val) => {
        this.val = val;
      })).addToggle((toggle) => {
        toggle.setValue(this.overrideFlag);
        toggle.setTooltip("Override if exists!");
        toggle.onChange((val) => {
          localStorage.setItem("overrideFlag", val + "");
          this.overrideFlag = val;
        });
      });
      new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
        if (this.key == null || this.key.trim() == "") {
          new import_obsidian3.Notice("Key could not be empty!");
          return;
        }
        if (this.val == null || this.val.trim() == "") {
          new import_obsidian3.Notice("Value could not be empty!");
          return;
        }
        this.close();
        let api = this.app.plugins.plugins["metaedit"].api;
        let c_num = 0;
        let u_num = 0;
        for (let i = 0; i < this.resultArr.length; i++) {
          let info = this.resultArr[i];
          let val = yield api.getPropertyValue(this.key, info);
          if (val == null) {
            api.createYamlProperty(this.key, this.val, info);
            c_num += 1;
          } else if (this.overrideFlag || val.trim() == "") {
            api.update(this.key, this.val, info);
            u_num += 1;
          }
        }
        new import_obsidian3.Notice("Edit Success!");
        new import_obsidian3.Notice("Add " + c_num + " !");
        new import_obsidian3.Notice("Update " + u_num + " !");
      }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian3.Notice("Edit Canceled!");
      }));
    }
  }
};

// src/action/edit-front-matter-action.ts
var EditFrontMatterAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      new EditFrontMatterModal(this.app, resultArr).open();
    } else {
      new import_obsidian4.Notice("No Files Found!");
    }
  }
};

// src/action/move-action.ts
var import_obsidian6 = __toModule(require("obsidian"));

// src/modal/move-confirm-modal.ts
var import_obsidian5 = __toModule(require("obsidian"));
var MoveConfirmModal = class extends import_obsidian5.Modal {
  constructor(app, moveInfos) {
    super(app);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Move/Copy?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.sourceFile.path + " -> " + info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian5.Setting(contentEl).addToggle((toggle) => {
      toggle.setTooltip("Copy instead!");
      toggle.onChange((val) => {
        this.copyFlag = val;
      });
    });
    new import_obsidian5.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      if (this.copyFlag) {
        for (const key in this.moveInfos) {
          let info = this.moveInfos[key];
          yield this.app.vault.copy(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
        }
        new import_obsidian5.Notice("Copy Success!");
      } else {
        for (const key in this.moveInfos) {
          let info = this.moveInfos[key];
          yield this.app.fileManager.renameFile(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
        }
        new import_obsidian5.Notice("Move Success!");
      }
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian5.Notice("Move Canceled!");
    }));
  }
};

// src/action/move-action.ts
var MoveAction = class {
  constructor(app, targetPath) {
    this.app = app;
    this.targetPath = targetPath;
  }
  act(resultArr) {
    const moveInfos = [];
    if (resultArr.length > 0) {
      resultArr.forEach((ff) => {
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new MoveConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian6.Notice("No Files Found!");
    }
  }
};

// src/action/rename-action.ts
var import_obsidian9 = __toModule(require("obsidian"));

// src/modal/rename-modal.ts
var import_obsidian8 = __toModule(require("obsidian"));

// src/modal/rename-confirm-modal.ts
var import_obsidian7 = __toModule(require("obsidian"));
var RenameConfirmModal = class extends import_obsidian7.Modal {
  constructor(app, resultArr, prefix, suffix) {
    super(app);
    this.resultArr = resultArr;
    this.prefix = prefix;
    this.suffix = suffix;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Rename Files" });
    this.resultArr.forEach((info) => {
      let name = this.newName(info.name);
      contentEl.createEl("div", { text: info.name + "->" + name });
    });
    new import_obsidian7.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      if ((this.prefix == null || this.prefix.trim() == "") && (this.suffix == null || this.suffix.trim() == "")) {
        new import_obsidian7.Notice("Prefix and Suffix could not be all empty!");
        return;
      }
      this.close();
      for (let i = 0; i < this.resultArr.length; i++) {
        let info = this.resultArr[i];
        let name = this.newName(info.name);
        yield this.app.fileManager.renameFile(info, info.parent.path + "/" + name);
      }
      new import_obsidian7.Notice("Rename Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian7.Notice("Rename Canceled!");
    }));
  }
  newName(name) {
    let tName = name + "";
    let suf = "";
    if (tName.endsWith(".md")) {
      tName = tName.replace(".md", "");
      suf = ".md";
    }
    if (this.prefix.startsWith("-")) {
      let t = this.prefix.substring(1, this.prefix.length);
      if (tName.startsWith(t)) {
        tName = tName.substring(t.length, tName.length);
      }
    } else {
      tName = this.prefix + tName;
    }
    if (this.suffix.startsWith("-")) {
      let t = this.suffix.substring(1, this.suffix.length);
      if (tName.endsWith(t)) {
        tName = tName.substring(0, tName.length - t.length);
      }
    } else {
      tName = tName + this.suffix;
    }
    return tName + suf;
  }
};

// src/modal/rename-modal.ts
var RenameModal = class extends import_obsidian8.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Rename Files" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian8.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian8.Setting(contentEl).addText((txt) => txt.setPlaceholder("Prefix").onChange((val) => {
        this.prefix = val;
      })).addText((txt) => txt.setPlaceholder("Suffix").onChange((val) => {
        this.suffix = val;
      }));
      new import_obsidian8.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
        if ((this.prefix == null || this.prefix.trim() == "") && (this.suffix == null || this.suffix.trim() == "")) {
          new import_obsidian8.Notice("Prefix and Suffix could not be all empty!");
          return;
        }
        this.close();
        new RenameConfirmModal(this.app, this.resultArr, this.prefix, this.suffix).open();
      }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian8.Notice("Rename Canceled!");
      }));
    }
  }
};

// src/action/rename-action.ts
var RenameAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      new RenameModal(this.app, resultArr).open();
    } else {
      new import_obsidian9.Notice("No Files Found!");
    }
  }
};

// src/action/sync-flomo-action.ts
var import_obsidian11 = __toModule(require("obsidian"));

// src/modal/sync-flomo-confirm-modal.ts
var import_obsidian10 = __toModule(require("obsidian"));
var import_node_fetch = __toModule(require_browser());
var SyncFlomoConfirmModal = class extends import_obsidian10.Modal {
  constructor(plugin, resultArr) {
    super(plugin.app);
    this.plugin = plugin;
    this.resultArr = resultArr;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Sync to flomo?" });
      if (this.resultArr.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian10.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.resultArr.forEach((info) => {
          contentEl.createEl("div", { text: info.path });
        });
        new import_obsidian10.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
          this.close();
          for (let i = 0; i < this.resultArr.length; i++) {
            let info = this.resultArr[i];
            let cont = yield this.app.vault.read(info);
            const response = yield (0, import_node_fetch.default)(this.plugin.settings.flomoAPI, {
              method: "POST",
              body: JSON.stringify({
                content: cont
              }),
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json"
              }
            });
            if (!response.ok) {
              new import_obsidian10.Notice(`Sync to flomo Error!${response.text}[${response.status}]`);
              return;
            }
          }
          new import_obsidian10.Notice("Sync to flomo Success!");
        }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian10.Notice("Sync to flomo Canceled!");
        }));
      }
    });
  }
};

// src/action/sync-flomo-action.ts
var SyncFlomoAction = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  act(resultArr) {
    let flomoAPI = this.plugin.settings.flomoAPI;
    if (!flomoAPI || flomoAPI.trim() == "") {
      new import_obsidian11.Notice("Please config flomoAPI first!");
      return;
    }
    if (resultArr.length > 0) {
      new SyncFlomoConfirmModal(this.plugin, resultArr).open();
    } else {
      new import_obsidian11.Notice("No Files Found!");
    }
  }
};

// src/modal/choose-file-modal.ts
var import_obsidian14 = __toModule(require("obsidian"));

// src/action/merge-action.ts
var import_obsidian13 = __toModule(require("obsidian"));

// src/modal/merge-confirm-modal.ts
var import_obsidian12 = __toModule(require("obsidian"));
var MergeConfirmModal = class extends import_obsidian12.Modal {
  constructor(app, resultArr, targetFilePath) {
    super(app);
    this.targetFilePath = targetFilePath;
    this.resultArr = resultArr;
    this.lineBreak = getLinebreak();
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Merge?" });
    contentEl.createEl("div", { text: "Merge all files below -> " + this.targetFilePath + " !" });
    this.resultArr.forEach((info) => {
      contentEl.createEl("div", { text: info.path });
    });
    new import_obsidian12.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      let targetFile = this.app.vault.getAbstractFileByPath(this.targetFilePath);
      if (targetFile == null) {
        targetFile = yield this.app.vault.create(this.targetFilePath, "");
      }
      for (const key in this.resultArr) {
        let info = this.resultArr[key];
        if (info.name.endsWith(".md")) {
          let cont = yield this.app.vault.read(info);
          cont = this.clearYaml(cont);
          cont = "# " + info.name.substring(0, info.name.length - 3) + this.lineBreak + cont + this.lineBreak + this.lineBreak;
          yield this.app.vault.append(targetFile, cont);
        } else {
          let cont = `![[${info.name}]]${this.lineBreak}${this.lineBreak}`;
          yield this.app.vault.append(targetFile, cont);
        }
      }
      new import_obsidian12.Notice("Merge Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian12.Notice("Merge Canceled!");
    }));
  }
  clearYaml(cont) {
    if (cont.startsWith("---")) {
      let lines = cont.split(this.lineBreak);
      let results = "";
      let appendFlag = true;
      for (let idx in lines) {
        if (lines[idx] == "---") {
          appendFlag = !appendFlag;
          continue;
        }
        if (appendFlag) {
          results = results + lines[idx] + this.lineBreak;
        }
      }
      return results;
    } else {
      return cont;
    }
  }
};
function getLinebreak() {
  let oss = ["Windows", "Mac", "Linux"];
  let lineBreaks = ["\r\n", "\n", "\n"];
  for (let i = 0; i < oss.length; i++) {
    let os = oss[i];
    if (navigator.userAgent.indexOf(os) != -1) {
      return lineBreaks[i];
    }
  }
  return "\n";
}

// src/action/merge-action.ts
var MergeAction = class {
  constructor(app, targetFilePath) {
    this.app = app;
    this.targetFilePath = targetFilePath;
  }
  act(resultArr) {
    return __async(this, null, function* () {
      if (resultArr.length > 0) {
        new MergeConfirmModal(this.app, resultArr, this.targetFilePath).open();
      } else {
        new import_obsidian13.Notice("No Files Found!");
      }
    });
  }
};

// src/modal/choose-file-modal.ts
var ChooseFileModal = class extends import_obsidian14.SuggestModal {
  constructor(app, readable) {
    super(app);
    this.readable = readable;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const files = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((file) => {
      if (file instanceof import_obsidian14.TFile && file.path.toLowerCase().contains(lowerCaseInputStr)) {
        files.push(file.path);
      }
    });
    if (files.length == 0) {
      if (query.endsWith(".md")) {
        files.push(query);
      } else {
        files.push(query + ".md");
      }
    }
    return files;
  }
  renderSuggestion(filePath, el) {
    el.createEl("div", { text: filePath });
  }
  onChooseSuggestion(file, evt) {
    let action = new MergeAction(this.app, file);
    this.readable.read(action);
  }
};

// src/modal/choose-folder-modal.ts
var import_obsidian15 = __toModule(require("obsidian"));
var ChooseFolderModal = class extends import_obsidian15.SuggestModal {
  constructor(app, readable, actionFunc) {
    super(app);
    this.readable = readable;
    this.actionFunc = actionFunc;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const folders = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((folder) => {
      if (folder instanceof import_obsidian15.TFolder && folder.path.toLowerCase().contains(lowerCaseInputStr)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path });
  }
  onChooseSuggestion(folder, evt) {
    let action = this.actionFunc(folder.path);
    this.readable.read(action);
  }
};

// src/reader/clipboard-reader.ts
var import_obsidian16 = __toModule(require("obsidian"));

// src/reader/read-info.ts
var ReadInfo = class {
  constructor(limit = 300) {
    this.limit = limit;
    this.resultArr = [];
  }
  add(file) {
    if (this.resultArr.length >= this.limit) {
      throw new Error("Load more than " + this.limit + " files!");
    }
    this.resultArr.push(file);
  }
  getFiles() {
    return this.resultArr;
  }
};

// src/reader/clipboard-reader.ts
var ClipboardReader = class {
  constructor(app) {
    this.app = app;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let promiseStr = navigator.clipboard.readText();
    promiseStr.then((str) => {
      let lines = str.split("\n");
      try {
        lines.forEach((line) => {
          let f = line;
          if (f.startsWith("[[")) {
            f = f.substring(2, f.length);
          }
          if (f.endsWith("]]")) {
            f = f.substring(0, f.length - 2);
          }
          if (!f.endsWith(".md") && !f.endsWith(".MD") && !f.endsWith(".Md") && !f.endsWith(".mD")) {
            f = f + ".md";
          }
          let ff = this.app.vault.getAbstractFileByPath(f);
          if (ff != null) {
            readInfo.add(ff);
          }
        });
        action.act(readInfo.getFiles());
      } catch (e) {
        new import_obsidian16.Notice(e.message);
      }
    }).catch((e) => {
      new import_obsidian16.Notice("Clipboard Content Error!" + e);
    });
  }
};

// src/command/clipboard-command.ts
var ClipboardCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    this.registMoveFile();
    this.registSyncFlomo();
    this.registMergeFile();
    this.registDeleteFile();
    this.registEditProp();
    this.registRenameFile();
  }
  registRenameFile() {
    this.plugin.addCommand({
      id: "rename-in-clipboard-files",
      name: "Rename in clipboard files ...",
      callback: () => {
        new ClipboardReader(this.plugin.app).read(new RenameAction(this.plugin.app));
      }
    });
  }
  registEditProp() {
    let metaedit = this.plugin.app.plugins.plugins["metaedit"];
    this.plugin.addCommand({
      id: "edit-front-matter-in-clipboard-files",
      name: "Edit Front Matter in clipboard files ...",
      checkCallback: (checking) => {
        if (!checking) {
          new ClipboardReader(this.plugin.app).read(new EditFrontMatterAction(this.plugin.app));
        }
        return metaedit != null;
      }
    });
  }
  registDeleteFile() {
    this.plugin.addCommand({
      id: "delete-files-in-clipboard",
      name: "Delete files in clipboard!",
      callback: () => {
        new ClipboardReader(this.plugin.app).read(new DeleteAction(this.plugin.app));
      }
    });
  }
  registMergeFile() {
    this.plugin.addCommand({
      id: "merge-files-to",
      name: "Merge files to ...",
      callback: () => {
        new ChooseFileModal(this.plugin.app, new ClipboardReader(this.plugin.app)).open();
      }
    });
  }
  registSyncFlomo() {
    this.plugin.addCommand({
      id: "sync-files-to-flomo",
      name: "Sync files to flomo ...",
      callback: () => {
        new ClipboardReader(this.plugin.app).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registMoveFile() {
    this.plugin.addCommand({
      id: "move-files-to",
      name: "Move files to ...",
      callback: () => {
        let actionFunc = (path) => {
          return new MoveAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new ClipboardReader(this.plugin.app), actionFunc).open();
      }
    });
  }
};

// src/action/create-action.ts
var import_obsidian18 = __toModule(require("obsidian"));

// src/modal/create-confirm-modal.ts
var import_obsidian17 = __toModule(require("obsidian"));
var CreateConfirmModal = class extends import_obsidian17.Modal {
  constructor(app, moveInfos) {
    super(app);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Create?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian17.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      for (const key in this.moveInfos) {
        let info = this.moveInfos[key];
        yield this.app.vault.create(info.targetDir + "/" + info.sourceFile.name, "");
      }
      new import_obsidian17.Notice("Create Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian17.Notice("Create Canceled!");
    }));
  }
};

// src/action/create-action.ts
var CreateAction = class {
  constructor(app, targetPath) {
    this.app = app;
    this.targetPath = targetPath;
  }
  act(resultArr) {
    const moveInfos = [];
    if (resultArr.length > 0) {
      resultArr.forEach((ff) => {
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new CreateConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian18.Notice("No Files Found!");
    }
  }
};

// src/reader/current-file-reader.ts
var import_obsidian19 = __toModule(require("obsidian"));
var ReadType;
(function(ReadType2) {
  ReadType2[ReadType2["LINKS"] = 0] = "LINKS";
  ReadType2[ReadType2["UN_RESOLVED_LINKS"] = 1] = "UN_RESOLVED_LINKS";
  ReadType2[ReadType2["CONTENT"] = 2] = "CONTENT";
})(ReadType || (ReadType = {}));
var CurrentFileReader = class {
  constructor(app, readType) {
    this.readType = 0;
    this.app = app;
    this.readType = readType;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let currentFile = this.app.workspace.getActiveFile();
    if (currentFile == null) {
      new import_obsidian19.Notice("No active file!");
      return;
    }
    let currentFilePath = currentFile.path;
    let paths = [];
    if (this.readType == 2) {
      paths.push(currentFilePath);
    } else if (this.readType == 1) {
      let linkObj = this.app.metadataCache.unresolvedLinks[currentFilePath];
      for (let key in linkObj) {
        paths.push(key);
      }
    } else {
      let linkObj = this.app.metadataCache.resolvedLinks[currentFilePath];
      for (let key in linkObj) {
        paths.push(key);
      }
    }
    try {
      if (this.readType == 1) {
        paths.forEach((path) => {
          let ff = new VirtualFile(path);
          readInfo.add(ff);
        });
      } else {
        paths.forEach((path) => {
          let ff = this.app.vault.getAbstractFileByPath(path);
          if (ff != null) {
            readInfo.add(ff);
          }
        });
      }
      action.act(readInfo.getFiles());
    } catch (e) {
      new import_obsidian19.Notice(e.message);
    }
  }
};
var VirtualFile = class {
  constructor(path) {
    let idx = path.lastIndexOf("/");
    if (!path.endsWith(".md")) {
      path = path + ".md";
    }
    this.path = path;
    if (idx >= 0) {
      this.name = path.substring(idx, path.length);
    } else {
      this.name = path;
    }
  }
};

// src/command/current-file-command.ts
var CurrentFileCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    this.registMoveFile();
    this.registSyncContentToFlomo();
    this.registSyncFileToFlomo();
    this.registCreateFile();
    this.registMergeFile();
    this.registDeleteFile();
    this.registEditProp();
    this.registRenameFile();
  }
  registRenameFile() {
    this.plugin.addCommand({
      id: "rename-in-current-file-links",
      name: "Rename in current file links ...",
      callback: () => {
        new CurrentFileReader(this.plugin.app).read(new RenameAction(this.plugin.app));
      }
    });
  }
  registEditProp() {
    let metaedit = this.plugin.app.plugins.plugins["metaedit"];
    this.plugin.addCommand({
      id: "edit-front-matter-in-current-file-links",
      name: "Edit Front Matter in current file links ...",
      checkCallback: (checking) => {
        if (!checking) {
          new CurrentFileReader(this.plugin.app).read(new EditFrontMatterAction(this.plugin.app));
        }
        return metaedit != null;
      }
    });
  }
  registDeleteFile() {
    this.plugin.addCommand({
      id: "delete-links-in-current-file",
      name: "Delete link-files in current file!",
      callback: () => {
        new CurrentFileReader(this.plugin.app).read(new DeleteAction(this.plugin.app));
      }
    });
  }
  registMergeFile() {
    this.plugin.addCommand({
      id: "merge-links-to",
      name: "Merge links in current file to ...",
      callback: () => {
        new ChooseFileModal(this.plugin.app, new CurrentFileReader(this.plugin.app)).open();
      }
    });
  }
  registCreateFile() {
    this.plugin.addCommand({
      id: "create-links",
      name: "Create links in current file ...",
      callback: () => {
        let actionFunc = (path) => {
          return new CreateAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new CurrentFileReader(this.plugin.app, ReadType.UN_RESOLVED_LINKS), actionFunc).open();
      }
    });
  }
  registSyncFileToFlomo() {
    this.plugin.addCommand({
      id: "sync-links-to",
      name: "Sync links in current file to flomo ...",
      callback: () => {
        new CurrentFileReader(this.plugin.app).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registSyncContentToFlomo() {
    this.plugin.addCommand({
      id: "sync-content-to",
      name: "Sync content in current file to flomo ...",
      callback: () => {
        new CurrentFileReader(this.plugin.app, ReadType.CONTENT).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registMoveFile() {
    this.plugin.addCommand({
      id: "move-links-to",
      name: "Move links in current file to ...",
      callback: () => {
        let actionFunc = (path) => {
          return new MoveAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new CurrentFileReader(this.plugin.app), actionFunc).open();
      }
    });
  }
};

// src/command/dataview-command.ts
var import_obsidian_dataview2 = __toModule(require_lib());

// src/action/copy-action.ts
var import_obsidian20 = __toModule(require("obsidian"));
var CopyAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      let str = "";
      resultArr.forEach((ff) => {
        let name = ff.name;
        if (name.endsWith(".md")) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + ff.path + "|" + name + "]]\n";
      });
      navigator.clipboard.writeText(str);
      new import_obsidian20.Notice("Copy links success!");
    } else {
      new import_obsidian20.Notice("No Files Found!");
    }
  }
};

// src/reader/dataview-reader.ts
var import_obsidian21 = __toModule(require("obsidian"));
var import_obsidian_dataview = __toModule(require_lib());
var DataviewReader = class {
  constructor(app, queryStr) {
    this.app = app;
    this.queryStr = queryStr;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let api = (0, import_obsidian_dataview.getAPI)();
    let qStr = formatStr(this.queryStr);
    api.query(qStr).then((res) => {
      if (res.successful) {
        let filePaths = [];
        if (res.value.type == "list") {
          res.value.values.forEach((it) => {
            filePaths.push(it.path);
          });
        } else if (res.value.type == "table") {
          filePaths = res.value.values;
          res.value.values.forEach((it) => {
            it.forEach((innerIt) => {
              if (innerIt && innerIt.path) {
                filePaths.push(innerIt.path);
                return;
              }
            });
          });
        } else {
          res.value.values.forEach((it) => {
            filePaths.push(it.link.path);
          });
        }
        try {
          filePaths.forEach((filePath) => {
            let ff = this.app.vault.getAbstractFileByPath(filePath.toString());
            if (ff != null) {
              readInfo.add(ff);
            }
          });
          action.act(readInfo.getFiles());
        } catch (e) {
          new import_obsidian21.Notice(e.message);
        }
      } else {
        new import_obsidian21.Notice("Query string error![" + this.queryStr + "]");
      }
    });
  }
};
function formatStr(queryStr) {
  let str = queryStr.trimStart();
  let commandStr = str.substring(0, 4);
  if (commandStr.toUpperCase() == "LIST") {
    return "LIST" + str.substring(4, str.length);
  }
  if (commandStr.toUpperCase() == "TABL") {
    return "TABLE" + str.substring(5, str.length);
  }
  if (commandStr.toUpperCase() == "TASK") {
    return "TASK" + str.substring(4, str.length);
  }
  return queryStr;
}

// src/command/dataview-command.ts
var DataviewCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    let dataviewApi = (0, import_obsidian_dataview2.getAPI)();
    this.registMoveFile(dataviewApi);
    this.registSyncFlomo(dataviewApi);
    this.registMergeFile(dataviewApi);
    this.registDeleteFile(dataviewApi);
    this.registCopyLinks(dataviewApi);
    this.registEditProp(dataviewApi);
    this.registRenameFile(dataviewApi);
  }
  registRenameFile(dataviewApi) {
    this.plugin.addCommand({
      id: "rename-in-dataview-results",
      name: "Rename in dataview results ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin.app, editor.getSelection()).read(new RenameAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registEditProp(dataviewApi) {
    let metaedit = this.plugin.app.plugins.plugins["metaedit"];
    this.plugin.addCommand({
      id: "edit-front-matter-in-dataview-results",
      name: "Edit Front Matter in dataview results ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin.app, editor.getSelection()).read(new EditFrontMatterAction(this.plugin.app));
        }
        return dataviewApi != null && metaedit != null;
      }
    });
  }
  registCopyLinks(dataviewApi) {
    this.plugin.addCommand({
      id: "copy-dataview-result-links",
      name: "Copy dataview result links!",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin.app, editor.getSelection()).read(new CopyAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registDeleteFile(dataviewApi) {
    this.plugin.addCommand({
      id: "delete-dataview-results",
      name: "Delete dataview query results!",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin.app, editor.getSelection()).read(new DeleteAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registMergeFile(dataviewApi) {
    this.plugin.addCommand({
      id: "merge-dataview-results-to",
      name: "Merge dataview query results to ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new ChooseFileModal(this.plugin.app, new DataviewReader(this.plugin.app, editor.getSelection())).open();
        }
        return dataviewApi != null;
      }
    });
  }
  registSyncFlomo(dataviewApi) {
    this.plugin.addCommand({
      id: "sync-dataview-results-to",
      name: "Sync dataview query results to flomo ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin.app, editor.getSelection()).read(new SyncFlomoAction(this.plugin));
        }
        return dataviewApi != null;
      }
    });
  }
  registMoveFile(dataviewApi) {
    this.plugin.addCommand({
      id: "move-dataview-results-to",
      name: "Move dataview query results to ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          let actionFunc = (path) => {
            return new MoveAction(this.plugin.app, path);
          };
          new ChooseFolderModal(this.plugin.app, new DataviewReader(this.plugin.app, editor.getSelection()), actionFunc).open();
        }
        return dataviewApi != null;
      }
    });
  }
};

// main.ts
var FileCookerPlugin = class extends import_obsidian22.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      new CurrentFileCommand(this).regist();
      new ClipboardCommand(this).regist();
      new DataviewCommand(this).regist();
      this.addSettingTab(new FileCookerSettingTab(this.app, this));
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var DEFAULT_SETTINGS = {
  flomoAPI: ""
};
var FileCookerSettingTab = class extends import_obsidian22.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for File Cooker!" });
    new import_obsidian22.Setting(containerEl).setName("flomoAPI").setDesc("config flomo API to sync notes").addText((text) => text.setPlaceholder("Enter flomo API").setValue(this.plugin.settings.flomoAPI).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.flomoAPI = value;
      yield this.plugin.saveSettings();
    })));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvYnJvd3Nlci5qcyIsICJub2RlX21vZHVsZXMvb2JzaWRpYW4tZGF0YXZpZXcvc3JjL2luZGV4LnRzIiwgIm1haW4udHMiLCAic3JjL2FjdGlvbi9kZWxldGUtYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9kZWxldGUtY29uZmlybS1tb2RhbC50cyIsICJzcmMvYWN0aW9uL2VkaXQtZnJvbnQtbWF0dGVyLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvZWRpdC1mcm9udC1tYXR0ZXItbW9kYWwudHMiLCAic3JjL2FjdGlvbi9tb3ZlLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvbW92ZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9hY3Rpb24vcmVuYW1lLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvcmVuYW1lLW1vZGFsLnRzIiwgInNyYy9tb2RhbC9yZW5hbWUtY29uZmlybS1tb2RhbC50cyIsICJzcmMvYWN0aW9uL3N5bmMtZmxvbW8tYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9zeW5jLWZsb21vLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL21vZGFsL2Nob29zZS1maWxlLW1vZGFsLnRzIiwgInNyYy9hY3Rpb24vbWVyZ2UtYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9tZXJnZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9tb2RhbC9jaG9vc2UtZm9sZGVyLW1vZGFsLnRzIiwgInNyYy9yZWFkZXIvY2xpcGJvYXJkLXJlYWRlci50cyIsICJzcmMvcmVhZGVyL3JlYWQtaW5mby50cyIsICJzcmMvY29tbWFuZC9jbGlwYm9hcmQtY29tbWFuZC50cyIsICJzcmMvYWN0aW9uL2NyZWF0ZS1hY3Rpb24udHMiLCAic3JjL21vZGFsL2NyZWF0ZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9yZWFkZXIvY3VycmVudC1maWxlLXJlYWRlci50cyIsICJzcmMvY29tbWFuZC9jdXJyZW50LWZpbGUtY29tbWFuZC50cyIsICJzcmMvY29tbWFuZC9kYXRhdmlldy1jb21tYW5kLnRzIiwgInNyYy9hY3Rpb24vY29weS1hY3Rpb24udHMiLCAic3JjL3JlYWRlci9kYXRhdmlldy1yZWFkZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIlwidXNlIHN0cmljdFwiO1xuXG4vLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbFxudmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gdGhlIG9ubHkgcmVsaWFibGUgbWVhbnMgdG8gZ2V0IHRoZSBnbG9iYWwgb2JqZWN0IGlzXG5cdC8vIGBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpYFxuXHQvLyBIb3dldmVyLCB0aGlzIGNhdXNlcyBDU1AgdmlvbGF0aW9ucyBpbiBDaHJvbWUgYXBwcy5cblx0aWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgeyByZXR1cm4gc2VsZjsgfVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHdpbmRvdzsgfVxuXHRpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIGdsb2JhbDsgfVxuXHR0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCcpO1xufVxuXG52YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGdsb2JhbC5mZXRjaDtcblxuLy8gTmVlZGVkIGZvciBUeXBlU2NyaXB0IGFuZCBXZWJwYWNrLlxuaWYgKGdsb2JhbC5mZXRjaCkge1xuXHRleHBvcnRzLmRlZmF1bHQgPSBnbG9iYWwuZmV0Y2guYmluZChnbG9iYWwpO1xufVxuXG5leHBvcnRzLkhlYWRlcnMgPSBnbG9iYWwuSGVhZGVycztcbmV4cG9ydHMuUmVxdWVzdCA9IGdsb2JhbC5SZXF1ZXN0O1xuZXhwb3J0cy5SZXNwb25zZSA9IGdsb2JhbC5SZXNwb25zZTsiLCAiLy8gQmFzaWMgQVBJIHR5cGUuXG5leHBvcnQgdHlwZSB7IERhdGF2aWV3QXBpIH0gZnJvbSBcImFwaS9wbHVnaW4tYXBpXCI7XG5cbi8vIENvcmUgRGF0YXZpZXcgdHlwZXMuXG5leHBvcnQgdHlwZSB7IERhdGVUaW1lLCBEdXJhdGlvbiB9IGZyb20gXCJsdXhvblwiO1xuZXhwb3J0IHR5cGUge1xuICAgIExpbmssXG4gICAgRGF0YU9iamVjdCxcbiAgICBMaXRlcmFsVHlwZSxcbiAgICBMaXRlcmFsLFxuICAgIExpdGVyYWxSZXByLFxuICAgIFdyYXBwZWRMaXRlcmFsLFxuICAgIExpdGVyYWxXcmFwcGVyLFxuICAgIFdpZGdldCxcbn0gZnJvbSBcImRhdGEtbW9kZWwvdmFsdWVcIjtcblxuZXhwb3J0IHR5cGUgeyBSZXN1bHQsIFN1Y2Nlc3MsIEZhaWx1cmUgfSBmcm9tIFwiYXBpL3Jlc3VsdFwiO1xuZXhwb3J0IHR5cGUgeyBEYXRhQXJyYXkgfSBmcm9tIFwiYXBpL2RhdGEtYXJyYXlcIjtcblxuLy8gRGF0YXZpZXcgSW5kZXguXG5leHBvcnQgdHlwZSB7IExpc3RJdGVtLCBQYWdlTWV0YWRhdGEgfSBmcm9tIFwiZGF0YS1tb2RlbC9tYXJrZG93blwiO1xuZXhwb3J0IHR5cGUgeyBGdWxsSW5kZXgsIFByZWZpeEluZGV4LCBJbmRleE1hcCB9IGZyb20gXCJkYXRhLWluZGV4L2luZGV4XCI7XG5cbi8vIFNlcmlhbGl6ZWQgdHlwZXMgd2hpY2ggZGVzY3JpYmUgYWxsIG91dHB1dHMgb2Ygc2VyaWFsaXphdGlvbi5cbmV4cG9ydCB0eXBlIHsgU01hcmtkb3duUGFnZSwgU0xpc3RFbnRyeSwgU1Rhc2sgfSBmcm9tIFwiZGF0YS1tb2RlbC9zZXJpYWxpemVkL21hcmtkb3duXCI7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBJbXBsZW1lbnRhdGlvbiAvL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuaW1wb3J0IHR5cGUgeyBEYXRhdmlld0FwaSB9IGZyb20gXCJhcGkvcGx1Z2luLWFwaVwiO1xuXG5pbXBvcnQgXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuLy8gVXRpbGl0eSBmdW5jdGlvbnMuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBEYXRhdmlldyBBUEkgZnJvbSB0aGUgYXBwIGlmIHByb3ZpZGVkOyBpZiBub3QsIGl0IGlzIGluZmVycmVkIGZyb20gdGhlIGdsb2JhbCBBUEkgb2JqZWN0IGluc3RhbGxlZFxuICogb24gdGhlIHdpbmRvdy5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEFQSSA9IChhcHA/OiBBcHApOiBEYXRhdmlld0FwaSB8IHVuZGVmaW5lZCA9PiB7XG4gICAgaWYgKGFwcCkgcmV0dXJuIGFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXc/LmFwaTtcbiAgICBlbHNlIHJldHVybiB3aW5kb3cuRGF0YXZpZXdBUEk7XG59O1xuXG4vKiogRGV0ZXJtaW5lIGlmIERhdGF2aWV3IGlzIGVuYWJsZWQgaW4gdGhlIGdpdmVuIGFwcGxpY2F0aW9uLiAqL1xuZXhwb3J0IGNvbnN0IGlzUGx1Z2luRW5hYmxlZCA9IChhcHA6IEFwcCkgPT4gYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKFwiZGF0YXZpZXdcIik7XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDbGlwYm9hcmRDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvY2xpcGJvYXJkLWNvbW1hbmQnO1xuaW1wb3J0IHsgQ3VycmVudEZpbGVDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvY3VycmVudC1maWxlLWNvbW1hbmQnO1xuaW1wb3J0IHsgRGF0YXZpZXdDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvZGF0YXZpZXctY29tbWFuZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVDb29rZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogRmlsZUNvb2tlclBsdWdpblNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHRuZXcgQ3VycmVudEZpbGVDb21tYW5kKHRoaXMpLnJlZ2lzdCgpO1xuXHRcdG5ldyBDbGlwYm9hcmRDb21tYW5kKHRoaXMpLnJlZ2lzdCgpO1xuXHRcdG5ldyBEYXRhdmlld0NvbW1hbmQodGhpcykucmVnaXN0KCk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRmlsZUNvb2tlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRmlsZUNvb2tlclBsdWdpblNldHRpbmdzID0ge1xuXHRmbG9tb0FQSTogJydcbn1cblxuaW50ZXJmYWNlIEZpbGVDb29rZXJQbHVnaW5TZXR0aW5ncyB7XG5cdGZsb21vQVBJOiBzdHJpbmc7XG59XG5cbmNsYXNzIEZpbGVDb29rZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1NldHRpbmdzIGZvciBGaWxlIENvb2tlciEnfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdmbG9tb0FQSScpXG5cdFx0XHQuc2V0RGVzYygnY29uZmlnIGZsb21vIEFQSSB0byBzeW5jIG5vdGVzJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZsb21vIEFQSScpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mbG9tb0FQSSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZsb21vQVBJID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0fVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRGVsZXRlQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9kZWxldGUtY29uZmlybS1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBEZWxldGVBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhY3QocmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBuZXcgRGVsZXRlQ29uZmlybU1vZGFsKHRoaXMuYXBwLCByZXN1bHRBcnIpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIFx1MDBBMFx1NUYzOVx1N0E5N1x1Nzg2RVx1OEJBNFx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgRGVsZXRlQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyPSByZXN1bHRBcnI7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29uZmlybSBEZWxldGU/XCIgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIGZpbGVzIGZvdW5kIVwiIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5wYXRoIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC50cmFzaChpbmZvLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJEZWxldGUgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRGVsZXRlIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG9uQ2xvc2UoKSB7XG4gICAgLy8gICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAvLyAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgLy8gfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBFZGl0RnJvbnRNYXR0ZXJNb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvZWRpdC1mcm9udC1tYXR0ZXItbW9kYWxcIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRWRpdEZyb250TWF0dGVyQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgYWN0KHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG4gICAgICAgIGlmIChyZXN1bHRBcnIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbmV3IEVkaXRGcm9udE1hdHRlck1vZGFsKHRoaXMuYXBwLCByZXN1bHRBcnIpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTdGMTZcdThGOTFGcm9udCBNYXR0ZXJcdTVDNUVcdTYwMjdcbiAqL1xuZXhwb3J0IGNsYXNzIEVkaXRGcm9udE1hdHRlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuICAgIGtleTogU3RyaW5nO1xuICAgIHZhbDogU3RyaW5nO1xuICAgIG92ZXJyaWRlRmxhZzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICAgICAgbGV0IHRtcEZsYWcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm92ZXJyaWRlRmxhZ1wiKTtcbiAgICAgICAgaWYgKHRtcEZsYWcgJiYgXCJ0cnVlXCIgPT0gdG1wRmxhZykge1xuICAgICAgICAgICAgdGhpcy5vdmVycmlkZUZsYWcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiRWRpdCBGcm9udCBNYXR0ZXJcIiB9KTtcblxuICAgICAgICBpZiAodGhpcy5yZXN1bHRBcnIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTm8gZmlsZXMgZm91bmQhXCIgfSk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDbG9zZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnBhdGggfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHR4dCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdHh0LnNldFBsYWNlaG9sZGVyKFwiRnJvbnQgTWF0dGVyIEtleVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmtleSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS5hZGRUZXh0KCh0eHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHR4dC5zZXRQbGFjZWhvbGRlcihcIkZyb250IE1hdHRlciBWYWx1ZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5vdmVycmlkZUZsYWcpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VG9vbHRpcChcIk92ZXJyaWRlIGlmIGV4aXN0cyFcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm92ZXJyaWRlRmxhZ1wiLCB2YWwgKyBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3ZlcnJpZGVGbGFnID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMua2V5ID09IG51bGwgfHwgdGhpcy5rZXkudHJpbSgpID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIktleSBjb3VsZCBub3QgYmUgZW1wdHkhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbCA9PSBudWxsIHx8IHRoaXMudmFsLnRyaW0oKSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJWYWx1ZSBjb3VsZCBub3QgYmUgZW1wdHkhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXBpID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1wibWV0YWVkaXRcIl0uYXBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjX251bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVfbnVtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVzdWx0QXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmZvID0gdGhpcy5yZXN1bHRBcnJbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBhd2FpdCBhcGkuZ2V0UHJvcGVydHlWYWx1ZSh0aGlzLmtleSwgaW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLmNyZWF0ZVlhbWxQcm9wZXJ0eSh0aGlzLmtleSwgdGhpcy52YWwsIGluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY19udW0gKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm92ZXJyaWRlRmxhZyB8fCB2YWwudHJpbSgpID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaS51cGRhdGUodGhpcy5rZXksIHRoaXMudmFsLCBpbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVfbnVtICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVkaXQgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkFkZCBcIiArIGNfbnVtICsgXCIgIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVXBkYXRlIFwiICsgdV9udW0gKyBcIiAhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVkaXQgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgTW92ZUNvbmZpcm1Nb2RhbCB9IGZyb20gXCIuLi9tb2RhbC9tb3ZlLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSBcIi4uL21vZGFsL21vdmUtaW5mb1wiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuICAgIHRhcmdldFBhdGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0YXJnZXRQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMudGFyZ2V0UGF0aCA9IHRhcmdldFBhdGg7XG4gICAgfVxuXG4gICAgYWN0KHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG5cbiAgICAgICAgY29uc3QgbW92ZUluZm9zOiBNb3ZlSW5mb1tdID0gW107XG5cbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHRBcnIuZm9yRWFjaChmZiA9PiB7XG4gICAgICAgICAgICAgICAgbW92ZUluZm9zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VGaWxlOiBmZixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGlyOiB0aGlzLnRhcmdldFBhdGhcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIG5ldyBNb3ZlQ29uZmlybU1vZGFsKHRoaXMuYXBwLCBtb3ZlSW5mb3MpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSAnc3JjL21vZGFsL21vdmUtaW5mbyc7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU3OUZCXHU1MkE4L1x1NjJGN1x1OEQxRFx1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgTW92ZUNvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBtb3ZlSW5mb3M6IE1vdmVJbmZvW107XG4gICAgY29weUZsYWc6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbW92ZUluZm9zOiBNb3ZlSW5mb1tdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMubW92ZUluZm9zID0gbW92ZUluZm9zO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNvbmZpcm0gTW92ZS9Db3B5P1wiIH0pO1xuXG4gICAgICAgIHRoaXMubW92ZUluZm9zLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnNvdXJjZUZpbGUucGF0aCArIFwiIC0+IFwiICsgaW5mby50YXJnZXREaXIgKyBcIi9cIiArIGluZm8uc291cmNlRmlsZS5uYW1lIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRUb29sdGlwKFwiQ29weSBpbnN0ZWFkIVwiKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlGbGFnID0gdmFsO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvcHlGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5tb3ZlSW5mb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLm1vdmVJbmZvc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jb3B5KChpbmZvLnNvdXJjZUZpbGUgYXMgVEZpbGUpLCBpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ29weSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5tb3ZlSW5mb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLm1vdmVJbmZvc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGluZm8uc291cmNlRmlsZSwgaW5mby50YXJnZXREaXIgKyBcIi9cIiArIGluZm8uc291cmNlRmlsZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1vdmUgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1vdmUgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgUmVuYW1lTW9kYWwgfSBmcm9tIFwic3JjL21vZGFsL3JlbmFtZS1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW5hbWVBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhY3QocmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBuZXcgUmVuYW1lTW9kYWwodGhpcy5hcHAsIHJlc3VsdEFycikub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgUmVuYW1lQ29uZmlybU1vZGFsIH0gZnJvbSAnLi9yZW5hbWUtY29uZmlybS1tb2RhbCc7XG5cbi8qKlxuICogXHUwMEEwXHU5MUNEXHU1NDdEXHU1NDBEXHU4QkJFXHU3RjZFXHU1RjM5XHU3QTk3XG4gKi9cbmV4cG9ydCBjbGFzcyBSZW5hbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXTtcbiAgICBwcmVmaXg6IFN0cmluZztcbiAgICBzdWZmaXg6IFN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJSZW5hbWUgRmlsZXNcIiB9KTtcblxuICAgICAgICBpZiAodGhpcy5yZXN1bHRBcnIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTm8gZmlsZXMgZm91bmQhXCIgfSk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDbG9zZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnBhdGggfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHR4dCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdHh0LnNldFBsYWNlaG9sZGVyKFwiUHJlZml4XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlZml4ID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApLmFkZFRleHQoKHR4dCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdHh0LnNldFBsYWNlaG9sZGVyKFwiU3VmZml4XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3VmZml4ID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLnByZWZpeCA9PSBudWxsIHx8IHRoaXMucHJlZml4LnRyaW0oKSA9PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICh0aGlzLnN1ZmZpeCA9PSBudWxsIHx8IHRoaXMuc3VmZml4LnRyaW0oKSA9PSBcIlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUHJlZml4IGFuZCBTdWZmaXggY291bGQgbm90IGJlIGFsbCBlbXB0eSFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZW5hbWVDb25maXJtTW9kYWwodGhpcy5hcHAsIHRoaXMucmVzdWx0QXJyLCB0aGlzLnByZWZpeCwgdGhpcy5zdWZmaXgpLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJSZW5hbWUgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRBYnN0cmFjdEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogXHUwMEEwXHU5MUNEXHU1NDdEXHU1NDBEXHU3ODZFXHU4QkE0XHU1RjM5XHU3QTk3XG4gKi9cbmV4cG9ydCBjbGFzcyBSZW5hbWVDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG4gICAgcHJlZml4OiBTdHJpbmc7XG4gICAgc3VmZml4OiBTdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10sIHByZWZpeDogU3RyaW5nLCBzdWZmaXg6IFN0cmluZykge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICAgICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG4gICAgICAgIHRoaXMuc3VmZml4ID0gc3VmZml4O1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlJlbmFtZSBGaWxlc1wiIH0pO1xuXG4gICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHRoaXMubmV3TmFtZShpbmZvLm5hbWUpO1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5uYW1lICsgXCItPlwiICsgbmFtZSB9KTtcbiAgICAgICAgfSlcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLnByZWZpeCA9PSBudWxsIHx8IHRoaXMucHJlZml4LnRyaW0oKSA9PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICh0aGlzLnN1ZmZpeCA9PSBudWxsIHx8IHRoaXMuc3VmZml4LnRyaW0oKSA9PSBcIlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQcmVmaXggYW5kIFN1ZmZpeCBjb3VsZCBub3QgYmUgYWxsIGVtcHR5IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVzdWx0QXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLnJlc3VsdEFycltpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHRoaXMubmV3TmFtZShpbmZvLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoaW5mbywgaW5mby5wYXJlbnQucGF0aCArIFwiL1wiICsgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUmVuYW1lIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJSZW5hbWUgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICB9XG5cbiAgICBuZXdOYW1lKG5hbWU6IFN0cmluZyk6IFN0cmluZyB7XG4gICAgICAgIGxldCB0TmFtZSA9IG5hbWUgKyBcIlwiO1xuICAgICAgICBsZXQgc3VmID0gXCJcIjtcbiAgICAgICAgaWYgKHROYW1lLmVuZHNXaXRoKFwiLm1kXCIpKSB7XG4gICAgICAgICAgICB0TmFtZSA9IHROYW1lLnJlcGxhY2UoXCIubWRcIiwgXCJcIik7XG4gICAgICAgICAgICBzdWYgPSBcIi5tZFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByZWZpeC5zdGFydHNXaXRoKFwiLVwiKSkge1xuICAgICAgICAgICAgbGV0IHQgPSB0aGlzLnByZWZpeC5zdWJzdHJpbmcoMSwgdGhpcy5wcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgICAgIGlmICh0TmFtZS5zdGFydHNXaXRoKHQpKSB7XG4gICAgICAgICAgICAgICAgdE5hbWUgPSB0TmFtZS5zdWJzdHJpbmcodC5sZW5ndGgsIHROYW1lLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0TmFtZSA9IHRoaXMucHJlZml4ICsgdE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3VmZml4LnN0YXJ0c1dpdGgoXCItXCIpKSB7XG4gICAgICAgICAgICBsZXQgdCA9IHRoaXMuc3VmZml4LnN1YnN0cmluZygxLCB0aGlzLnN1ZmZpeC5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHROYW1lLmVuZHNXaXRoKHQpKSB7XG4gICAgICAgICAgICAgICAgdE5hbWUgPSB0TmFtZS5zdWJzdHJpbmcoMCwgdE5hbWUubGVuZ3RoIC0gdC5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdE5hbWUgPSB0TmFtZSArIHRoaXMuc3VmZml4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0TmFtZSArIHN1ZjtcbiAgICB9XG59IiwgImltcG9ydCBGaWxlQ29va2VyUGx1Z2luIGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFN5bmNGbG9tb0NvbmZpcm1Nb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvc3luYy1mbG9tby1jb25maXJtLW1vZGFsXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIFN5bmNGbG9tb0FjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0KHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG4gICAgICAgIGxldCBmbG9tb0FQSSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZsb21vQVBJO1xuICAgICAgICBpZiAoIWZsb21vQVBJIHx8IGZsb21vQVBJLnRyaW0oKSA9PSBcIlwiKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiUGxlYXNlIGNvbmZpZyBmbG9tb0FQSSBmaXJzdCFcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBuZXcgU3luY0Zsb21vQ29uZmlybU1vZGFsKHRoaXMucGx1Z2luLCByZXN1bHRBcnIpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCBGaWxlQ29va2VyUGx1Z2luIGZyb20gJ21haW4nO1xuaW1wb3J0IHsgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1NDBDXHU2QjY1XHU1MjMwZmxvbW9cdTc2ODRcdTY1ODdcdTRFRjZcbiAqL1xuZXhwb3J0IGNsYXNzIFN5bmNGbG9tb0NvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXTtcbiAgICBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4sIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIgPSByZXN1bHRBcnI7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29uZmlybSBTeW5jIHRvIGZsb21vP1wiIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdEFyci5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJObyBmaWxlcyBmb3VuZCFcIiB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNsb3NlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8ucGF0aCB9KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDb25maXJtXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucmVzdWx0QXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmZvID0gdGhpcy5yZXN1bHRBcnJbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCgoaW5mbyBhcyBURmlsZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUQ4M0RcdURDNDdcdUZFMEYgY29uc3QgcmVzcG9uc2U6IFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5wbHVnaW4uc2V0dGluZ3MuZmxvbW9BUEksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBTeW5jIHRvIGZsb21vIEVycm9yISR7cmVzcG9uc2UudGV4dH1bJHtyZXNwb25zZS5zdGF0dXN9XWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTeW5jIHRvIGZsb21vIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlN5bmMgdG8gZmxvbW8gQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgU3VnZ2VzdE1vZGFsLCBUQWJzdHJhY3RGaWxlLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1lcmdlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tZXJnZS1hY3Rpb24nO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzcmMvcmVhZGVyL3JlYWRhYmxlJztcblxuLyoqXG4gKiBcdTkwMDlcdTYyRTlcdTY1ODdcdTY4NjNcdTVGMzlcdTdBOTdcbiAqL1xuZXhwb3J0IGNsYXNzIENob29zZUZpbGVNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcblxuXHR0eXBlOiBzdHJpbmc7XG5cdHJlYWRhYmxlOiBSZWFkYWJsZTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVhZGFibGU6IFJlYWRhYmxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnJlYWRhYmxlID0gcmVhZGFibGU7XG5cdH1cblxuXHQvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdFx0Y29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG5cdFx0Y29uc3QgZmlsZXM6IHN0cmluZ1tdID0gW107XG5cdFx0Y29uc3QgbG93ZXJDYXNlSW5wdXRTdHIgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXHRcdGFic3RyYWN0RmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlckNhc2VJbnB1dFN0cikpIHtcblx0XHRcdFx0ZmlsZXMucHVzaChmaWxlLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmIChmaWxlcy5sZW5ndGggPT0gMCkge1xuXHRcdFx0aWYgKHF1ZXJ5LmVuZHNXaXRoKFwiLm1kXCIpKSB7XG5cdFx0XHRcdGZpbGVzLnB1c2gocXVlcnkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmlsZXMucHVzaChxdWVyeSArIFwiLm1kXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZmlsZXM7XG5cdH1cblxuXHQvLyBSZW5kZXJzIGVhY2ggc3VnZ2VzdGlvbiBpdGVtLlxuXHRyZW5kZXJTdWdnZXN0aW9uKGZpbGVQYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogZmlsZVBhdGggfSk7XG5cdH1cblxuXHQvLyBQZXJmb3JtIGFjdGlvbiBvbiB0aGUgc2VsZWN0ZWQgc3VnZ2VzdGlvbi5cblx0b25DaG9vc2VTdWdnZXN0aW9uKGZpbGU6IHN0cmluZywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuXHRcdGxldCBhY3Rpb24gPSBuZXcgTWVyZ2VBY3Rpb24odGhpcy5hcHAsIGZpbGUpO1xuXHRcdHRoaXMucmVhZGFibGUucmVhZChhY3Rpb24pO1xuXHR9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBNZXJnZUNvbmZpcm1Nb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvbWVyZ2UtY29uZmlybS1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBNZXJnZUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcbiAgICB0YXJnZXRGaWxlUGF0aDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRhcmdldEZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMudGFyZ2V0RmlsZVBhdGggPSB0YXJnZXRGaWxlUGF0aDtcbiAgICB9XG5cbiAgICBhc3luYyBhY3QocmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcblxuICAgICAgICBpZiAocmVzdWx0QXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG5ldyBNZXJnZUNvbmZpcm1Nb2RhbCh0aGlzLmFwcCwgcmVzdWx0QXJyLCB0aGlzLnRhcmdldEZpbGVQYXRoKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1NDA4XHU1RTc2XHU3Njg0XHU2NTg3XHU0RUY2XG4gKi9cbmV4cG9ydCBjbGFzcyBNZXJnZUNvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICB0YXJnZXRGaWxlUGF0aDogc3RyaW5nO1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuICAgIGxpbmVCcmVhazogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdLCB0YXJnZXRGaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMudGFyZ2V0RmlsZVBhdGggPSB0YXJnZXRGaWxlUGF0aDtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIgPSByZXN1bHRBcnI7XG4gICAgICAgIHRoaXMubGluZUJyZWFrID0gZ2V0TGluZWJyZWFrKCk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29uZmlybSBNZXJnZT9cIiB9KTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk1lcmdlIGFsbCBmaWxlcyBiZWxvdyAtPiBcIiArIHRoaXMudGFyZ2V0RmlsZVBhdGggKyBcIiAhXCIgfSk7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnBhdGggfSk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy50YXJnZXRGaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RmlsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh0aGlzLnRhcmdldEZpbGVQYXRoLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMucmVzdWx0QXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLnJlc3VsdEFycltrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLm5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKChpbmZvIGFzIFRGaWxlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnQgPSB0aGlzLmNsZWFyWWFtbChjb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udCA9IFwiIyBcIiArIGluZm8ubmFtZS5zdWJzdHJpbmcoMCwgaW5mby5uYW1lLmxlbmd0aCAtIDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHRoaXMubGluZUJyZWFrICsgY29udCArIHRoaXMubGluZUJyZWFrICsgdGhpcy5saW5lQnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFwcGVuZCgodGFyZ2V0RmlsZSBhcyBURmlsZSksIGNvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ID0gYCFbWyR7aW5mby5uYW1lfV1dJHt0aGlzLmxpbmVCcmVha30ke3RoaXMubGluZUJyZWFrfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFwcGVuZCgodGFyZ2V0RmlsZSBhcyBURmlsZSksIGNvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJNZXJnZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTWVyZ2UgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgY2xlYXJZYW1sKGNvbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGlmIChjb250LnN0YXJ0c1dpdGgoXCItLS1cIikpIHtcbiAgICAgICAgICAgIGxldCBsaW5lcyA9IGNvbnQuc3BsaXQodGhpcy5saW5lQnJlYWspO1xuICAgICAgICAgICAgbGV0IHJlc3VsdHMgPSBcIlwiO1xuICAgICAgICAgICAgbGV0IGFwcGVuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgaWR4IGluIGxpbmVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVzW2lkeF0gPT0gXCItLS1cIikge1xuICAgICAgICAgICAgICAgICAgICBhcHBlbmRGbGFnID0gIWFwcGVuZEZsYWc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXBwZW5kRmxhZykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cyArIGxpbmVzW2lkeF0gKyB0aGlzLmxpbmVCcmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjb250O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRMaW5lYnJlYWsoKTogc3RyaW5nIHtcbiAgICBsZXQgb3NzID0gW1wiV2luZG93c1wiLCBcIk1hY1wiLCBcIkxpbnV4XCJdO1xuICAgIGxldCBsaW5lQnJlYWtzID0gW1wiXFxyXFxuXCIsIFwiXFxuXCIsIFwiXFxuXCJdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3NzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBvcyA9IG9zc1tpXTtcbiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihvcykgIT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBsaW5lQnJlYWtzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcIlxcblwiO1xufVxuIiwgImltcG9ydCB7IEFwcCwgU3VnZ2VzdE1vZGFsLCBUQWJzdHJhY3RGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hY3Rpb24nO1xuaW1wb3J0IHsgTW92ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vbW92ZS1hY3Rpb24nO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzcmMvcmVhZGVyL3JlYWRhYmxlJztcblxuLyoqXG4gKiBcdTkwMDlcdTYyRTlcdTc2RUVcdTVGNTVcdTVGMzlcdTdBOTdcbiAqL1xuZXhwb3J0IGNsYXNzIENob29zZUZvbGRlck1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPFRBYnN0cmFjdEZpbGU+IHtcblxuXHR0eXBlOiBzdHJpbmc7XG5cdHJlYWRhYmxlOiBSZWFkYWJsZTtcblx0YWN0aW9uRnVuYzogKHBhdGg6IHN0cmluZykgPT4gQWN0aW9uO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZWFkYWJsZTogUmVhZGFibGUsIGFjdGlvbkZ1bmM6IChwYXRoOiBzdHJpbmcpID0+IEFjdGlvbikge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5yZWFkYWJsZSA9IHJlYWRhYmxlO1xuXHRcdHRoaXMuYWN0aW9uRnVuYyA9IGFjdGlvbkZ1bmM7XG5cdH1cblxuXHQvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBUQWJzdHJhY3RGaWxlW10ge1xuXHRcdGNvbnN0IGFic3RyYWN0RmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpO1xuXHRcdGNvbnN0IGZvbGRlcnM6IFRBYnN0cmFjdEZpbGVbXSA9IFtdO1xuXHRcdGNvbnN0IGxvd2VyQ2FzZUlucHV0U3RyID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcblx0XHRhYnN0cmFjdEZpbGVzLmZvckVhY2goKGZvbGRlcikgPT4ge1xuXHRcdFx0aWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIgJiYgZm9sZGVyLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlckNhc2VJbnB1dFN0cikpIHtcblx0XHRcdFx0Zm9sZGVycy5wdXNoKGZvbGRlcik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGZvbGRlcnM7XG5cdH1cblxuXHQvLyBSZW5kZXJzIGVhY2ggc3VnZ2VzdGlvbiBpdGVtLlxuXHRyZW5kZXJTdWdnZXN0aW9uKGZvbGRlcjogVEFic3RyYWN0RmlsZSwgZWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0ZWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBmb2xkZXIucGF0aCB9KTtcblx0XHQvLyBlbC5jcmVhdGVFbChcInNtYWxsXCIsIHsgdGV4dDogZm9sZGVyLnBhdGggfSk7XG5cdH1cblxuXHQvLyBQZXJmb3JtIGFjdGlvbiBvbiB0aGUgc2VsZWN0ZWQgc3VnZ2VzdGlvbi5cblx0b25DaG9vc2VTdWdnZXN0aW9uKGZvbGRlcjogVEFic3RyYWN0RmlsZSwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuXHRcdGxldCBhY3Rpb24gPSB0aGlzLmFjdGlvbkZ1bmMoZm9sZGVyLnBhdGgpO1xuXHRcdHRoaXMucmVhZGFibGUucmVhZChhY3Rpb24pO1xuXHR9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCB7IFJlYWRJbmZvIH0gZnJvbSBcIi4vcmVhZC1pbmZvXCI7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gXCIuL3JlYWRhYmxlXCI7XG5cblxuZXhwb3J0IGNsYXNzIENsaXBib2FyZFJlYWRlciBpbXBsZW1lbnRzIFJlYWRhYmxlIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgcmVhZEluZm8gPSBuZXcgUmVhZEluZm8oKTtcblxuICAgICAgICBsZXQgcHJvbWlzZVN0ciA9IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKTtcblxuICAgICAgICBwcm9taXNlU3RyLnRoZW4oc3RyID0+IHtcbiAgICAgICAgICAgIGxldCBsaW5lcyA9IHN0ci5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGYgPSBsaW5lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZi5zdGFydHNXaXRoKFwiW1tcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmLnN1YnN0cmluZygyLCBmLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGYuZW5kc1dpdGgoXCJdXVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGYuc3Vic3RyaW5nKDAsIGYubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmLmVuZHNXaXRoKFwiLm1kXCIpICYmICFmLmVuZHNXaXRoKFwiLk1EXCIpICYmICFmLmVuZHNXaXRoKFwiLk1kXCIpICYmICFmLmVuZHNXaXRoKFwiLm1EXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gZiArIFwiLm1kXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGYpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkKGZmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFjdGlvbi5hY3QocmVhZEluZm8uZ2V0RmlsZXMoKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaChlID0+IHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDbGlwYm9hcmQgQ29udGVudCBFcnJvciFcIiArIGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0ICogYXMgaW50ZXJuYWwgZnJvbSBcInN0cmVhbVwiO1xuXG5cbi8qKlxuICogXHU4QkZCXHU1M0Q2XHU3Njg0XHU0RkUxXHU2MDZGXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFkSW5mbyB7XG5cbiAgICBsaW1pdDogbnVtYmVyO1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuXG4gICAgY29uc3RydWN0b3IobGltaXQ6IG51bWJlciA9IDMwMCkge1xuICAgICAgICB0aGlzLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIHRoaXMucmVzdWx0QXJyID0gW107XG4gICAgfVxuXG4gICAgYWRkKGZpbGU6IFRBYnN0cmFjdEZpbGUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyLmxlbmd0aCA+PSB0aGlzLmxpbWl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2FkIG1vcmUgdGhhbiBcIiArIHRoaXMubGltaXQgKyBcIiBmaWxlcyFcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXN1bHRBcnIucHVzaChmaWxlKTtcbiAgICB9XG5cbiAgICBnZXRGaWxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0QXJyO1xuICAgIH1cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSAnbWFpbic7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2FjdGlvbic7XG5pbXBvcnQgeyBEZWxldGVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2RlbGV0ZS1hY3Rpb24nO1xuaW1wb3J0IHsgRWRpdEZyb250TWF0dGVyQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9lZGl0LWZyb250LW1hdHRlci1hY3Rpb24nO1xuaW1wb3J0IHsgTW92ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vbW92ZS1hY3Rpb24nO1xuaW1wb3J0IHsgUmVuYW1lQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9yZW5hbWUtYWN0aW9uJztcbmltcG9ydCB7IFN5bmNGbG9tb0FjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vc3luYy1mbG9tby1hY3Rpb24nO1xuaW1wb3J0IHsgQ2hvb3NlRmlsZU1vZGFsIH0gZnJvbSAnc3JjL21vZGFsL2Nob29zZS1maWxlLW1vZGFsJztcbmltcG9ydCB7IENob29zZUZvbGRlck1vZGFsIH0gZnJvbSAnc3JjL21vZGFsL2Nob29zZS1mb2xkZXItbW9kYWwnO1xuaW1wb3J0IHsgQ2xpcGJvYXJkUmVhZGVyIH0gZnJvbSAnc3JjL3JlYWRlci9jbGlwYm9hcmQtcmVhZGVyJztcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmQnO1xuXG5leHBvcnQgY2xhc3MgQ2xpcGJvYXJkQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuXG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIHJlZ2lzdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWdpc3RNb3ZlRmlsZSgpO1xuICAgICAgICB0aGlzLnJlZ2lzdFN5bmNGbG9tbygpO1xuICAgICAgICB0aGlzLnJlZ2lzdE1lcmdlRmlsZSgpO1xuICAgICAgICB0aGlzLnJlZ2lzdERlbGV0ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RFZGl0UHJvcCgpO1xuICAgICAgICB0aGlzLnJlZ2lzdFJlbmFtZUZpbGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFJlbmFtZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdyZW5hbWUtaW4tY2xpcGJvYXJkLWZpbGVzJyxcbiAgICAgICAgICAgIG5hbWU6ICdSZW5hbWUgaW4gY2xpcGJvYXJkIGZpbGVzIC4uLicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5wbHVnaW4uYXBwKS5yZWFkKG5ldyBSZW5hbWVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVkaXQgRnJvbnQgTWF0dGVyIFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9saWp5emUvb2JzaWRpYW4tc3RhdGUtc3dpdGNoZXIvYmxvYi9kMGE4MDA4MWIwZmNjMWI4OTllZWQyZTNkN2U4MzRjMmQ1NzAzODc1L3NyYy91dGlsLnRzI0w0MlxuICAgICAqL1xuICAgIHByaXZhdGUgcmVnaXN0RWRpdFByb3AoKSB7XG4gICAgICAgIGxldCBtZXRhZWRpdCA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZWRpdFwiXTtcblxuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZWRpdC1mcm9udC1tYXR0ZXItaW4tY2xpcGJvYXJkLWZpbGVzJyxcbiAgICAgICAgICAgIG5hbWU6ICdFZGl0IEZyb250IE1hdHRlciBpbiBjbGlwYm9hcmQgZmlsZXMgLi4uJyxcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZFJlYWRlcih0aGlzLnBsdWdpbi5hcHApLnJlYWQobmV3IEVkaXRGcm9udE1hdHRlckFjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFlZGl0ICE9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0RGVsZXRlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2RlbGV0ZS1maWxlcy1pbi1jbGlwYm9hcmQnLFxuICAgICAgICAgICAgbmFtZTogJ0RlbGV0ZSBmaWxlcyBpbiBjbGlwYm9hcmQhJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZFJlYWRlcih0aGlzLnBsdWdpbi5hcHApLnJlYWQobmV3IERlbGV0ZUFjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RNZXJnZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdtZXJnZS1maWxlcy10bycsXG4gICAgICAgICAgICBuYW1lOiAnTWVyZ2UgZmlsZXMgdG8gLi4uJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IENob29zZUZpbGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5wbHVnaW4uYXBwKSkub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFN5bmNGbG9tbygpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3N5bmMtZmlsZXMtdG8tZmxvbW8nLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgZmlsZXMgdG8gZmxvbW8gLi4uJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZFJlYWRlcih0aGlzLnBsdWdpbi5hcHApLnJlYWQobmV3IFN5bmNGbG9tb0FjdGlvbih0aGlzLnBsdWdpbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1vdmVGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnbW92ZS1maWxlcy10bycsXG4gICAgICAgICAgICBuYW1lOiAnTW92ZSBmaWxlcyB0byAuLi4nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uRnVuYyA9IChwYXRoOiBzdHJpbmcpOiBBY3Rpb24gPT4geyByZXR1cm4gbmV3IE1vdmVBY3Rpb24odGhpcy5wbHVnaW4uYXBwLCBwYXRoKTsgfTtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlRm9sZGVyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMucGx1Z2luLmFwcCksIGFjdGlvbkZ1bmMpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQ3JlYXRlQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9jcmVhdGUtY29uZmlybS1tb2RhbFwiO1xuaW1wb3J0IHsgTW92ZUluZm8gfSBmcm9tIFwiLi4vbW9kYWwvbW92ZS1pbmZvXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIENyZWF0ZUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcbiAgICB0YXJnZXRQYXRoOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGFyZ2V0UGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnRhcmdldFBhdGggPSB0YXJnZXRQYXRoO1xuICAgIH1cblxuICAgIGFjdChyZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuXG4gICAgICAgIGNvbnN0IG1vdmVJbmZvczogTW92ZUluZm9bXSA9IFtdO1xuXG4gICAgICAgIGlmIChyZXN1bHRBcnIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0QXJyLmZvckVhY2goZmYgPT4ge1xuICAgICAgICAgICAgICAgIG1vdmVJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlRmlsZTogZmYsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERpcjogdGhpcy50YXJnZXRQYXRoXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBuZXcgQ3JlYXRlQ29uZmlybU1vZGFsKHRoaXMuYXBwLCBtb3ZlSW5mb3MpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSAnc3JjL21vZGFsL21vdmUtaW5mbyc7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1MjFCXHU1RUZBXHU3Njg0XHU2NTg3XHU0RUY2XG4gKi9cbmV4cG9ydCBjbGFzcyBDcmVhdGVDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgbW92ZUluZm9zOiBNb3ZlSW5mb1tdO1xuICAgIGNvcHlGbGFnOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1vdmVJbmZvczogTW92ZUluZm9bXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLm1vdmVJbmZvcyA9IG1vdmVJbmZvcztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIENyZWF0ZT9cIiB9KTtcblxuICAgICAgICB0aGlzLm1vdmVJbmZvcy5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby50YXJnZXREaXIgKyBcIi9cIiArIGluZm8uc291cmNlRmlsZS5uYW1lIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMubW92ZUluZm9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLm1vdmVJbmZvc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWF0ZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYXRlIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUsIFRGaWxlLCBURm9sZGVyLCBWYXVsdCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcInNyYy9hY3Rpb24vYWN0aW9uXCI7XG5pbXBvcnQgeyBSZWFkSW5mbyB9IGZyb20gXCIuL3JlYWQtaW5mb1wiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwiLi9yZWFkYWJsZVwiO1xuXG5cbmV4cG9ydCBlbnVtIFJlYWRUeXBlIHtcbiAgICBMSU5LUywgVU5fUkVTT0xWRURfTElOS1MsIENPTlRFTlRcbn1cblxuXG5leHBvcnQgY2xhc3MgQ3VycmVudEZpbGVSZWFkZXIgaW1wbGVtZW50cyBSZWFkYWJsZSB7XG5cbiAgICBhcHA6IEFwcDtcbiAgICByZWFkVHlwZTogUmVhZFR5cGUgPSBSZWFkVHlwZS5MSU5LUztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZWFkVHlwZT86IFJlYWRUeXBlKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnJlYWRUeXBlID0gcmVhZFR5cGU7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgcmVhZEluZm8gPSBuZXcgUmVhZEluZm8oKTtcblxuICAgICAgICBsZXQgY3VycmVudEZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXG4gICAgICAgIGlmIChjdXJyZW50RmlsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gYWN0aXZlIGZpbGUhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGN1cnJlbnRGaWxlUGF0aCA9IGN1cnJlbnRGaWxlLnBhdGg7XG5cbiAgICAgICAgbGV0IHBhdGhzID0gW107XG4gICAgICAgIGlmICh0aGlzLnJlYWRUeXBlID09IFJlYWRUeXBlLkNPTlRFTlQpIHtcbiAgICAgICAgICAgIHBhdGhzLnB1c2goY3VycmVudEZpbGVQYXRoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlYWRUeXBlID09IFJlYWRUeXBlLlVOX1JFU09MVkVEX0xJTktTKSB7XG4gICAgICAgICAgICBsZXQgbGlua09iaiA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUudW5yZXNvbHZlZExpbmtzW2N1cnJlbnRGaWxlUGF0aF07XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbGlua09iaikge1xuICAgICAgICAgICAgICAgIHBhdGhzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBsaW5rT2JqID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzW2N1cnJlbnRGaWxlUGF0aF07XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbGlua09iaikge1xuICAgICAgICAgICAgICAgIHBhdGhzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkVHlwZSA9PSBSZWFkVHlwZS5VTl9SRVNPTFZFRF9MSU5LUykge1xuICAgICAgICAgICAgICAgIC8vIFx1NjcyQVx1ODlFM1x1Njc5MFx1NzY4NFx1OTRGRVx1NjNBNVx1RkYwQ1x1NTIxQlx1NUVGQVx1ODY1QVx1NjJERlx1NjU4N1x1NEVGNlx1NUJGOVx1OEM2MVxuICAgICAgICAgICAgICAgIHBhdGhzLmZvckVhY2gocGF0aCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IG5ldyBWaXJ0dWFsRmlsZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkKGZmKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXRocy5mb3JFYWNoKHBhdGggPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkSW5mby5hZGQoZmYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGlvbi5hY3QocmVhZEluZm8uZ2V0RmlsZXMoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTVCOUVcdTk2NDVcdTY1ODdcdTRFRjZcdUZGMENcdTVDMzFcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTg2NUFcdTY1ODdcdTRFRjZcbiAqIFx1N0VEM1x1Njc4NFx1NTQ4Q1RBYnN0cmFjdEZpbGVcdTRFMDBcdTgxRjRcdUZGMENcdTY1QjlcdTRGQkZcdTdFREZcdTRFMDBcdTY0Q0RcdTRGNUNcbiAqL1xuY2xhc3MgVmlydHVhbEZpbGUge1xuXG4gICAgdmF1bHQ6IFZhdWx0O1xuICAgIHBhdGg6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGFyZW50OiBURm9sZGVyO1xuXG4gICAgY29uc3RydWN0b3IocGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBpZHggPSBwYXRoLmxhc3RJbmRleE9mKFwiL1wiKTtcbiAgICAgICAgaWYgKCFwYXRoLmVuZHNXaXRoKFwiLm1kXCIpKSB7XG4gICAgICAgICAgICBwYXRoID0gcGF0aCArIFwiLm1kXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBwYXRoLnN1YnN0cmluZyhpZHgsIHBhdGgubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHBhdGg7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCBGaWxlQ29va2VyUGx1Z2luIGZyb20gJ21haW4nO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hY3Rpb24nO1xuaW1wb3J0IHsgQ3JlYXRlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9jcmVhdGUtYWN0aW9uJztcbmltcG9ydCB7IERlbGV0ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbic7XG5pbXBvcnQgeyBFZGl0RnJvbnRNYXR0ZXJBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2VkaXQtZnJvbnQtbWF0dGVyLWFjdGlvbic7XG5pbXBvcnQgeyBNb3ZlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tb3ZlLWFjdGlvbic7XG5pbXBvcnQgeyBSZW5hbWVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL3JlbmFtZS1hY3Rpb24nO1xuaW1wb3J0IHsgU3luY0Zsb21vQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9zeW5jLWZsb21vLWFjdGlvbic7XG5pbXBvcnQgeyBDaG9vc2VGaWxlTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWZpbGUtbW9kYWwnO1xuaW1wb3J0IHsgQ2hvb3NlRm9sZGVyTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWZvbGRlci1tb2RhbCc7XG5pbXBvcnQgeyBDdXJyZW50RmlsZVJlYWRlciwgUmVhZFR5cGUgfSBmcm9tICdzcmMvcmVhZGVyL2N1cnJlbnQtZmlsZS1yZWFkZXInO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZCc7XG5cbmV4cG9ydCBjbGFzcyBDdXJyZW50RmlsZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcblxuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICByZWdpc3QoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0TW92ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RTeW5jQ29udGVudFRvRmxvbW8oKTtcbiAgICAgICAgdGhpcy5yZWdpc3RTeW5jRmlsZVRvRmxvbW8oKTtcbiAgICAgICAgdGhpcy5yZWdpc3RDcmVhdGVGaWxlKCk7XG4gICAgICAgIHRoaXMucmVnaXN0TWVyZ2VGaWxlKCk7XG4gICAgICAgIHRoaXMucmVnaXN0RGVsZXRlRmlsZSgpO1xuICAgICAgICB0aGlzLnJlZ2lzdEVkaXRQcm9wKCk7XG4gICAgICAgIHRoaXMucmVnaXN0UmVuYW1lRmlsZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0UmVuYW1lRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJyZW5hbWUtaW4tY3VycmVudC1maWxlLWxpbmtzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIlJlbmFtZSBpbiBjdXJyZW50IGZpbGUgbGlua3MgLi4uXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLnBsdWdpbi5hcHApLnJlYWQobmV3IFJlbmFtZUFjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRWRpdCBGcm9udCBNYXR0ZXIgXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2xpanl6ZS9vYnNpZGlhbi1zdGF0ZS1zd2l0Y2hlci9ibG9iL2QwYTgwMDgxYjBmY2MxYjg5OWVlZDJlM2Q3ZTgzNGMyZDU3MDM4NzUvc3JjL3V0aWwudHMjTDQyXG4gICAgICovXG4gICAgcHJpdmF0ZSByZWdpc3RFZGl0UHJvcCgpIHtcbiAgICAgICAgbGV0IG1ldGFlZGl0ID0gdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1tcIm1ldGFlZGl0XCJdO1xuXG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwiZWRpdC1mcm9udC1tYXR0ZXItaW4tY3VycmVudC1maWxlLWxpbmtzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIkVkaXQgRnJvbnQgTWF0dGVyIGluIGN1cnJlbnQgZmlsZSBsaW5rcyAuLi5cIixcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luLmFwcCkucmVhZChuZXcgRWRpdEZyb250TWF0dGVyQWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWVkaXQgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3REZWxldGVGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImRlbGV0ZS1saW5rcy1pbi1jdXJyZW50LWZpbGVcIixcbiAgICAgICAgICAgIG5hbWU6IFwiRGVsZXRlIGxpbmstZmlsZXMgaW4gY3VycmVudCBmaWxlIVwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4uYXBwKS5yZWFkKG5ldyBEZWxldGVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0TWVyZ2VGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcIm1lcmdlLWxpbmtzLXRvXCIsXG4gICAgICAgICAgICBuYW1lOiBcIk1lcmdlIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byAuLi5cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IENob29zZUZpbGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLnBsdWdpbi5hcHApKS5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0Q3JlYXRlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJjcmVhdGUtbGlua3NcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQ3JlYXRlIGxpbmtzIGluIGN1cnJlbnQgZmlsZSAuLi5cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGFjdGlvbkZ1bmMgPSAocGF0aDogc3RyaW5nKTogQWN0aW9uID0+IHsgcmV0dXJuIG5ldyBDcmVhdGVBY3Rpb24odGhpcy5wbHVnaW4uYXBwLCBwYXRoKTsgfTtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlRm9sZGVyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4uYXBwLCBSZWFkVHlwZS5VTl9SRVNPTFZFRF9MSU5LUyksIGFjdGlvbkZ1bmMpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RTeW5jRmlsZVRvRmxvbW8oKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwic3luYy1saW5rcy10b1wiLFxuICAgICAgICAgICAgbmFtZTogXCJTeW5jIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byBmbG9tbyAuLi5cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luLmFwcCkucmVhZChuZXcgU3luY0Zsb21vQWN0aW9uKHRoaXMucGx1Z2luKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0U3luY0NvbnRlbnRUb0Zsb21vKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInN5bmMtY29udGVudC10b1wiLFxuICAgICAgICAgICAgbmFtZTogXCJTeW5jIGNvbnRlbnQgaW4gY3VycmVudCBmaWxlIHRvIGZsb21vIC4uLlwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4uYXBwLCBSZWFkVHlwZS5DT05URU5UKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcy5wbHVnaW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RNb3ZlRmlsZSgpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJtb3ZlLWxpbmtzLXRvXCIsXG4gICAgICAgICAgICBuYW1lOiBcIk1vdmUgbGlua3MgaW4gY3VycmVudCBmaWxlIHRvIC4uLlwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uRnVuYyA9IChwYXRoOiBzdHJpbmcpOiBBY3Rpb24gPT4geyByZXR1cm4gbmV3IE1vdmVBY3Rpb24odGhpcy5wbHVnaW4uYXBwLCBwYXRoKTsgfTtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlRm9sZGVyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4uYXBwKSwgYWN0aW9uRnVuYykub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59IiwgImltcG9ydCBGaWxlQ29va2VyUGx1Z2luIGZyb20gJ21haW4nO1xuaW1wb3J0IHsgRWRpdG9yLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRhdmlld0FwaSwgZ2V0QVBJIH0gZnJvbSAnb2JzaWRpYW4tZGF0YXZpZXcnO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hY3Rpb24nO1xuaW1wb3J0IHsgQ29weUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vY29weS1hY3Rpb24nO1xuaW1wb3J0IHsgRGVsZXRlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9kZWxldGUtYWN0aW9uJztcbmltcG9ydCB7IEVkaXRGcm9udE1hdHRlckFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZWRpdC1mcm9udC1tYXR0ZXItYWN0aW9uJztcbmltcG9ydCB7IE1vdmVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL21vdmUtYWN0aW9uJztcbmltcG9ydCB7IFJlbmFtZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vcmVuYW1lLWFjdGlvbic7XG5pbXBvcnQgeyBTeW5jRmxvbW9BY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL3N5bmMtZmxvbW8tYWN0aW9uJztcbmltcG9ydCB7IENob29zZUZpbGVNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZmlsZS1tb2RhbCc7XG5pbXBvcnQgeyBDaG9vc2VGb2xkZXJNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZm9sZGVyLW1vZGFsJztcbmltcG9ydCB7IERhdGF2aWV3UmVhZGVyIH0gZnJvbSAnc3JjL3JlYWRlci9kYXRhdmlldy1yZWFkZXInO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZCc7XG5cbmV4cG9ydCBjbGFzcyBEYXRhdmlld0NvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcblxuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICByZWdpc3QoKTogdm9pZCB7XG4gICAgICAgIGxldCBkYXRhdmlld0FwaSA9IGdldEFQSSgpO1xuXG4gICAgICAgIHRoaXMucmVnaXN0TW92ZUZpbGUoZGF0YXZpZXdBcGkpO1xuICAgICAgICB0aGlzLnJlZ2lzdFN5bmNGbG9tbyhkYXRhdmlld0FwaSk7XG4gICAgICAgIHRoaXMucmVnaXN0TWVyZ2VGaWxlKGRhdGF2aWV3QXBpKTtcbiAgICAgICAgdGhpcy5yZWdpc3REZWxldGVGaWxlKGRhdGF2aWV3QXBpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RDb3B5TGlua3MoZGF0YXZpZXdBcGkpO1xuICAgICAgICB0aGlzLnJlZ2lzdEVkaXRQcm9wKGRhdGF2aWV3QXBpKTtcblxuICAgICAgICAvLyBSZW5hbWUgRmlsZXNcbiAgICAgICAgdGhpcy5yZWdpc3RSZW5hbWVGaWxlKGRhdGF2aWV3QXBpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFJlbmFtZUZpbGUoZGF0YXZpZXdBcGk6IERhdGF2aWV3QXBpKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwicmVuYW1lLWluLWRhdGF2aWV3LXJlc3VsdHNcIixcbiAgICAgICAgICAgIG5hbWU6IFwiUmVuYW1lIGluIGRhdGF2aWV3IHJlc3VsdHMgLi4uXCIsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbi5hcHAsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgUmVuYW1lQWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRWRpdCBGcm9udCBNYXR0ZXIgXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2xpanl6ZS9vYnNpZGlhbi1zdGF0ZS1zd2l0Y2hlci9ibG9iL2QwYTgwMDgxYjBmY2MxYjg5OWVlZDJlM2Q3ZTgzNGMyZDU3MDM4NzUvc3JjL3V0aWwudHMjTDQyXG4gICAgICogQHBhcmFtIGRhdGF2aWV3QXBpICAgICAgICBcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlZ2lzdEVkaXRQcm9wKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICBsZXQgbWV0YWVkaXQgPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1wibWV0YWVkaXRcIl07XG5cbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJlZGl0LWZyb250LW1hdHRlci1pbi1kYXRhdmlldy1yZXN1bHRzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIkVkaXQgRnJvbnQgTWF0dGVyIGluIGRhdGF2aWV3IHJlc3VsdHMgLi4uXCIsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbi5hcHAsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgRWRpdEZyb250TWF0dGVyQWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbCAmJiBtZXRhZWRpdCAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdENvcHlMaW5rcyhkYXRhdmlld0FwaTogRGF0YXZpZXdBcGkpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2NvcHktZGF0YXZpZXctcmVzdWx0LWxpbmtzJyxcbiAgICAgICAgICAgIG5hbWU6ICdDb3B5IGRhdGF2aWV3IHJlc3VsdCBsaW5rcyEnLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5wbHVnaW4uYXBwLCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpLnJlYWQobmV3IENvcHlBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdERlbGV0ZUZpbGUoZGF0YXZpZXdBcGk6IERhdGF2aWV3QXBpKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdkZWxldGUtZGF0YXZpZXctcmVzdWx0cycsXG4gICAgICAgICAgICBuYW1lOiAnRGVsZXRlIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMhJyxcbiAgICAgICAgICAgIGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGF2aWV3UmVhZGVyKHRoaXMucGx1Z2luLmFwcCwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBEZWxldGVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1lcmdlRmlsZShkYXRhdmlld0FwaTogRGF0YXZpZXdBcGkpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ21lcmdlLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuICAgICAgICAgICAgbmFtZTogJ01lcmdlIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMgdG8gLi4uJyxcbiAgICAgICAgICAgIGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENob29zZUZpbGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbi5hcHAsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkpLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGF2aWV3QXBpICE9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0U3luY0Zsb21vKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3luYy1kYXRhdmlldy1yZXN1bHRzLXRvJyxcbiAgICAgICAgICAgIG5hbWU6ICdTeW5jIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMgdG8gZmxvbW8gLi4uJyxcbiAgICAgICAgICAgIGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGF2aWV3UmVhZGVyKHRoaXMucGx1Z2luLmFwcCwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcy5wbHVnaW4pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGF2aWV3QXBpICE9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0TW92ZUZpbGUoZGF0YXZpZXdBcGk6IERhdGF2aWV3QXBpKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdtb3ZlLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuICAgICAgICAgICAgbmFtZTogJ01vdmUgZGF0YXZpZXcgcXVlcnkgcmVzdWx0cyB0byAuLi4nLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aW9uRnVuYyA9IChwYXRoOiBzdHJpbmcpOiBBY3Rpb24gPT4geyByZXR1cm4gbmV3IE1vdmVBY3Rpb24odGhpcy5wbHVnaW4uYXBwLCBwYXRoKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENob29zZUZvbGRlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgbmV3IERhdGF2aWV3UmVhZGVyKHRoaXMucGx1Z2luLmFwcCwgZWRpdG9yLmdldFNlbGVjdGlvbigpKSwgYWN0aW9uRnVuYykub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDb3B5QWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgYWN0KHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG5cbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgICAgICAgIHJlc3VsdEFyci5mb3JFYWNoKGZmID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGZmLm5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RyICs9IFwiW1tcIiArIGZmLnBhdGggKyBcInxcIiArIG5hbWUgKyBcIl1dXFxuXCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc3RyKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDb3B5IGxpbmtzIHN1Y2Nlc3MhXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSBcIi4vcmVhZGFibGVcIjtcbmltcG9ydCB7IGdldEFQSSB9IGZyb20gXCJvYnNpZGlhbi1kYXRhdmlld1wiO1xuaW1wb3J0IHsgUmVhZEluZm8gfSBmcm9tIFwiLi9yZWFkLWluZm9cIjtcblxuZXhwb3J0IGNsYXNzIERhdGF2aWV3UmVhZGVyIGltcGxlbWVudHMgUmVhZGFibGUge1xuXG4gICAgYXBwOiBBcHA7XG4gICAgcXVlcnlTdHI6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBxdWVyeVN0cjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnF1ZXJ5U3RyID0gcXVlcnlTdHI7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgcmVhZEluZm8gPSBuZXcgUmVhZEluZm8oKTtcblxuICAgICAgICBsZXQgYXBpID0gZ2V0QVBJKCk7XG5cbiAgICAgICAgbGV0IHFTdHIgPSBmb3JtYXRTdHIodGhpcy5xdWVyeVN0cik7XG5cbiAgICAgICAgYXBpLnF1ZXJ5KHFTdHIpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzc2Z1bCkge1xuICAgICAgICAgICAgICAgIGxldCBmaWxlUGF0aHM6IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChyZXMudmFsdWUudHlwZSA9PSBcImxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBMSVNUXG4gICAgICAgICAgICAgICAgICAgIHJlcy52YWx1ZS52YWx1ZXMuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChpdC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMudmFsdWUudHlwZSA9PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVEFCTEVcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzID0gcmVzLnZhbHVlLnZhbHVlcztcbiAgICAgICAgICAgICAgICAgICAgcmVzLnZhbHVlLnZhbHVlcy5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0LmZvckVhY2goaW5uZXJJdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVySXQgJiYgaW5uZXJJdC5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXRocy5wdXNoKGlubmVySXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUQVNLXG4gICAgICAgICAgICAgICAgICAgIHJlcy52YWx1ZS52YWx1ZXMuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChpdC5saW5rLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzLmZvckVhY2goKGZpbGVQYXRoOiB7IHRvU3RyaW5nOiAoKSA9PiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkKGZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmFjdChyZWFkSW5mby5nZXRGaWxlcygpKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJRdWVyeSBzdHJpbmcgZXJyb3IhW1wiICsgdGhpcy5xdWVyeVN0ciArIFwiXVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbi8qKlxuICogXHU1OTI3XHU1MTk5XHU1NDdEXHU0RUU0XG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFN0cihxdWVyeVN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgc3RyID0gcXVlcnlTdHIudHJpbVN0YXJ0KCk7XG5cbiAgICBsZXQgY29tbWFuZFN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgNCk7XG5cbiAgICBpZiAoY29tbWFuZFN0ci50b1VwcGVyQ2FzZSgpID09IFwiTElTVFwiKSB7XG4gICAgICAgIHJldHVybiBcIkxJU1RcIiArIHN0ci5zdWJzdHJpbmcoNCwgc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmRTdHIudG9VcHBlckNhc2UoKSA9PSBcIlRBQkxcIikge1xuICAgICAgICByZXR1cm4gXCJUQUJMRVwiICsgc3RyLnN1YnN0cmluZyg1LCBzdHIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICBpZiAoY29tbWFuZFN0ci50b1VwcGVyQ2FzZSgpID09IFwiVEFTS1wiKSB7XG4gICAgICAgIHJldHVybiBcIlRBU0tcIiArIHN0ci5zdWJzdHJpbmcoNCwgc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXJ5U3RyO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFHQSxRQUFJLFlBQVksV0FBWTtBQUkzQixVQUFJLE9BQU8sU0FBUyxhQUFhO0FBQUUsZUFBTztBQUFBO0FBQzFDLFVBQUksT0FBTyxXQUFXLGFBQWE7QUFBRSxlQUFPO0FBQUE7QUFDNUMsVUFBSSxPQUFPLFdBQVcsYUFBYTtBQUFFLGVBQU87QUFBQTtBQUM1QyxZQUFNLElBQUksTUFBTTtBQUFBO0FBR2pCLFFBQUksU0FBUztBQUViLFlBQU8sVUFBVSxVQUFVLE9BQU87QUFHbEMsUUFBSSxPQUFPLE9BQU87QUFDakIsY0FBUSxVQUFVLE9BQU8sTUFBTSxLQUFLO0FBQUE7QUFHckMsWUFBUSxVQUFVLE9BQU87QUFDekIsWUFBUSxVQUFVLE9BQU87QUFDekIsWUFBUSxXQUFXLE9BQU87QUFBQTtBQUFBOzs7Ozs7OztBQ2dCYixRQUFBLFVBQVMsQ0FBQyxRQUFzQzs7QUFDekQsVUFBSTtBQUFLLGVBQU8sTUFBQSxJQUFJLFFBQVEsUUFBUSxjQUFVLFFBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQTs7QUFDekMsZUFBTyxPQUFPOztBQUlWLFFBQUEsa0JBQWtCLENBQUMsUUFBYSxJQUFJLFFBQVEsZUFBZSxJQUFJOzs7Ozs7O0FDOUM1RTtBQUFBO0FBQUE7QUFBQSx3QkFBdUQ7OztBQ0F2RCx1QkFBMkM7OztBQ0EzQyxzQkFBMkQ7QUFLcEQsdUNBQWlDLHNCQUFNO0FBQUEsRUFHMUMsWUFBWSxLQUFVLFdBQTRCO0FBQzlDLFVBQU07QUFDTixTQUFLLFlBQVc7QUFBQTtB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
